<!DOCTYPE html>
<html>

<head>
<title>EA Data</title>


<link rel="stylesheet" href="EA.css">

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">


<style>
body {
  background-color: black;
}

</style>

</head>

<div class="div1">
<a href="https://elrondapes.com" target="_blank">
<img src="https://elrondapes.com/assets/logo.gif" class="eaLogo" alt="EA gif logo" style="max-width: 40%; max-height: 17.5%;">
</a>

<a href="https://community.elrondapes.com/" target="_blank">
<!-- <h1 style="color:white; position: top; float:right; padding:1vw; font-size: 3vw; font-family: Courier New;">Leaderboard</h1> -->

<h1 style="display: inline-block; position: top; float:right; padding:1.75vw; font-size: 1.75vw; font-family: Courier New;"><span class="heading6">&#127758;Community Map</span></h1>
</a>

<a href="https://app.elrondapes.com" target="_blank">
  <h1 style="display: inline-block; position: top; float:right; padding:1.75vw; font-size: 1.75vw; font-family: Courier New;"><span class="heading6">&#128171;Staking/Rarity</span></h1>

  </a>

</div>

  <!-- This is to test out the new button -->

  <div class="dropdown">
    <button class="MenuIcon">Menu<i class="arrow right"></i></button>
    <div class="dropdown-content">
      <a href="https://community.elrondapes.com/" target="_blank">&#127758;Community Map</a>
      <a href="https://app.elrondapes.com" target="_blank">&#128171;Staking/Rarity</a>
    </div>
  </div>
  <!-- End of button -->


<hr class="new5">

<!-- fix sticky image -->


<!--Hey leo, for the borders you can make them different green or red colors depending if up or down-->

<body>

  <div class="div2">

    <h1 class="GeneralOverview">General Overview</h1>
      <div>
        <h1 class="heading4" style="display: inline-block;"><span class="heading3">&#9989;Offical identifier: EAPES-8f3c1f</span></h1> 
        <span style="padding-left:.4vw; padding-right:.4vw;"></span>
        <h1 class="heading4" style="display: inline-block;"><span class="heading3">&#9989;Royalties: 10%</span></h1> 
        <span style="padding-left:.4vw; padding-right:.4vw;"></span>
        <h1 class="heading4" style="display: inline-block;"><span class="heading3">&#9989;Collection size: 10,000</span></h1> 
        <span style="padding-left:.4vw; padding-right:.4vw;"></span>
        </div>
        <br>
        <div>
          <h1 class="heading5" style="display: inline-block;"><span id="TotalVolume" class="heading6Good"></span></h1>
          <span style="padding-left:.4vw; padding-right:.4vw;"></span>
          <h1 class="heading5" style="display: inline-block;"><span id="24HourVol" class="heading6Good"></span></h1> 
          <span style="padding-left:.4vw; padding-right:.4vw;"></span>
          <h1 class="heading5" style="display: inline-block;"><span id="FloorPrice" class="heading6Good"></span></h1> 
          <span style="padding-left:.4vw; padding-right:.4vw;"></span>
          <h1 class="heading5" style="display: inline-block;"><span id="FloorPriceInUSDC" class="heading6Good"></span></h1> 
          <span style="padding-left:.4vw; padding-right:.4vw;"></span>
          <h1 class="heading5" style="display: inline-block;"><span id="AveSalePrice" class="heading6Good"></span></h1> 
          <span style="padding-left:.4vw; padding-right:.4vw;"></span>
          <h1 class="heading5" style="display: inline-block;"><span id="AmountStaked" class="heading6Good"></span></h1> 
          <span style="padding-left:.4vw; padding-right:.4vw;"></span>
          <h1 class="heading5" style="display: inline-block;"><span class="heading6Good">Total listed: xyz</span></h1> 
          <h1 class="heading5" style="display: inline-block;"><span class="heading6Good" id="LKmexDis"> <!--Inserted from script below--> </span></h1> 

          <script>
             //need to figure out how to insert numbers here!!
              const yValues = [65351563.04,49255868.54,60837585, 124261786, 57452353, 56209964, 191053348.33, 175114840, 81241363, 127490087, 136375496, 208856823, 176611312, 107292029, 104279777];
              const TotalLKmexDistribution = yValues.reduce((accumulator, value) => {
                return accumulator + value;
              }, 0);
              const RoundedNum=TotalLKmexDistribution.toFixed(1);
              document.getElementById("LKmexDis").innerHTML = 'Total LKmex Distribution: '+RoundedNum
          </script>

          <h1 class="heading5" style="display: inline-block;"><span class="heading6Good"> Twitter followers: xyz</span></h1> 
          <h1 class="heading5" style="display: inline-block;"><span class="heading6Good"> Discord Members: xyz</span></h1> 
          <h1 class="heading5" style="display: inline-block;"><span class="heading6Good"> Anything else? </span></h1> 
        </div>
  </div>

  <br>
  <br>



  <div class="div2">
  <h2 style="font-size: 3vw; color:white; font-family: 'Courier New'; text-decoration: underline;">Analytics</h2>
  <!-- <button onclick="myFunction()">Lkmex Rewards</button> -->
  <button onclick="myFunction()" class="button"><span>LKmex Rewards</span></button>

  <button onclick="myFunction1()" class="button"><span>Floor Price Data</span></button>

  <button onclick="myFunction2()" class="button"><span>Stakers / Listed</span></button>



  </div>
  <p id="AveLKmexPerWeek" class="hiddenObject"></p>



  <div class="chart" id="IDofChart">
  <canvas id="myChart"></canvas>
  </div>

  <div class="chart1" id="IDofChart1">
  <canvas id="myChart1"></canvas>
  </div>



<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<script>
  function myFunction(){
  var xValues = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15];
  const yValues = [65351563.04,49255868.54,60837585, 124261786, 57452353, 56209964, 191053348.33, 175114840, 81241363, 127490087, 136375496, 208856823, 176611312, 107292029, 104279777];
  const TotalLKmexDistribution = yValues.reduce((accumulator, value) => {
    return accumulator + value;
    }, 0);


  var h = (65351563.04+49255868.54+60837585+124261786+57452353+56209964+191053348.33+175114840+81241363+127490087+136375496+208856823+176611312+107292029+104279777)/15;
  var h_rounded = h.toFixed(1);
  document.getElementById("AveLKmexPerWeek").innerHTML = "The average weekly Distribution of LKmex is: "+h_rounded; //write to the id below graphs average distribution of LKmex

  const AverageLKmexRewards = (yValues.reduce((a, b) => a + b, 0)) / yValues.length; //this variable works!

  var PrimePool = 165+168+166+168+166+164+165+152+148+143+140+140+137;
  var PrimePoolAve = PrimePool/13;

  var SpecialPool = 132+139+128+138+227+232+119+118+157+166+152+152+66;
  var SpecialPoolAve = SpecialPool/13;

  var rank1_1000 = 499+470+506+511+507+514+519+513+498+489+478+471+484;
  var rank1_1000Ave = rank1_1000/13;

  var rank1001_2500 = 979+912+1003+1032+994+976+1020+1010+987+958+956+967+973;
  var rank1001_2500Ave = rank1001_2500/13;

  var rank2501_4500 = 1306+1256+1327+1337+1309+1312+1336+1325+1302+1272+1260+1268+1299;
  var rank2501_4500Ave = rank2501_4500/13;

  var rank4501_7000 = 1483+1392+1511+1526+1517+1507+1546+1542+1535+1527+1493+1524+1529;
  var rank4501_7000Ave = rank4501_7000/13;

  var rank7001_10000 = 1690+1554+1721+1725+1727+1725+1802+1824+1789+1793+1774+1767+1786;
  var rank7001_10000Ave = rank7001_10000/13;

  //Average LKmex return per pool per ape staked:
  var LKmexPerPrime = (AverageLKmexRewards*0.15)/PrimePoolAve
  var LKmexPerSpecial = (AverageLKmexRewards*0.05)/SpecialPoolAve
  var LKmexPerRank1_1000 = (AverageLKmexRewards*0.1)/rank1_1000Ave
  var LKmexPerRank1001_2500 = (AverageLKmexRewards*0.15)/rank1001_2500Ave
  var LKmexPerRank2501_4500 = (AverageLKmexRewards*0.18)/rank2501_4500Ave
  var LKmexPerRank4501_7000 = (AverageLKmexRewards*0.2)/rank4501_7000Ave
  var LKmexPerRank7001_10000 = (AverageLKmexRewards*0.17)/rank7001_10000Ave


  var xValues1 = ["PrimePool", "SpecialPool", "Rank1_1000", "Rank1001_2500", "Rank2501_4500","Rank4501_7000","Rank7001_10000"];
  var yValues1 = [LKmexPerPrime, LKmexPerSpecial, LKmexPerRank1_1000, LKmexPerRank1001_2500, LKmexPerRank2501_4500,LKmexPerRank4501_7000,LKmexPerRank7001_10000];
  var barColors = ["#A9A20E", "#278908","#056A61","#051563","#10044F","#30044F","#4F0444"];

  
  new Chart("myChart", {
    type: "line",
    data: {
      labels: xValues,
      datasets: [{
        fill: false,
        lineTension: 0,
        backgroundColor: "#1FE1DE",
        borderColor: "1ABDBB",
        data: yValues
      }]
    },
    options: {
      maintainAspectRatio:false,
      legend: {display: false},
      title:{
        display:true,
        text: "LKmex distributed per week",fontColor:"white",fontFamily:"Courier New",fontSize:18,
      },
      scales: {
        yAxes: [{ticks: {min: 0, max:240000000, stepSize: 40000000, fontColor:"white",fontFamily:"Courier New"},
        gridLines:{
          display:true,
          color:"#052942",
        },
        scaleLabel: {
          display: true,
          labelString: 'LKmex Amount', fontColor:"white",fontFamily:"Courier New",fontSize:15,fontStyle:"bold"},
      }],

        xAxes: [{ticks: {min: 1, max:16,fontColor:"white",fontFamily:"Courier New"},
        gridLines:{
          display:true,
          color:"#052942",
        },
        scaleLabel: {
          display: true,
          labelString: 'Week', fontColor:"yellow",fontColor:"white",fontFamily:"Courier New",fontSize:15,fontStyle:"bold"},
      
      }],

      },
    }
  });

  new Chart("myChart1", {
  type: "bar",
  data: {
    labels: xValues1,
    datasets: [{
      backgroundColor: barColors,
      data: yValues1
    }]
  },
  options: {
    scales:{
      yAxes:[{
        ticks:{fontColor:"white",fontFamily:"Courier New"},
        scaleLabel:{
          display: true,
          labelString: 'LKmex Amount', fontColor:"white",fontFamily:"Courier New",fontSize:15,fontStyle:"bold",
        }
      }],

      xAxes:[{
        ticks:{fontColor:"white",fontFamily:"Courier New"},
        scaleLabel:{
          display: true,
          labelString: 'Rank of Ape', fontColor:"white",fontFamily:"Courier New",fontSize:15,fontStyle:"bold",
        }
      }],

    },
    maintainAspectRatio:false,
    legend: {display: false},
    title: {
      display: true,
      text: "LKmex per ape staked",fontColor:"white",fontFamily:"Courier New",fontSize:18,
    }
  }
});



  }
    //end of function0

  function myFunction2(){
    document.getElementById("AveLKmexPerWeek").innerHTML = "Sorry, this data hasn't been gathered yet :("; //write to the id below graphs average distribution of LKmex
    document.getElementById("IDofChart").style.display= "none";
    document.getElementById("IDofChart1").style.display= "none";
    //style.display = "none";
  }
  //end of function1

  function myFunction1(){
    const floorPriceURL = 'https://new-api.trust.market/getFloorPrice/EAPES-8f3c1f/EGLD';
    async function GetFloorPrice(){
      const responce = await fetch(floorPriceURL);
      const data = await responce.json();
      document.getElementById("AveLKmexPerWeek").innerHTML = ("the floor price is "+data);
    }
    GetFloorPrice();
  }
  // use https://www.w3schools.com/howto/tryit.asp?filename=tryhow_js_toggle_hide_show to see how to display and hide data
  </script>

  <script>
    //API URLS
    const floorPriceURL = 'https://new-api.trust.market/getFloorPrice/EAPES-8f3c1f/EGLD';
    const USDCfloorPriceURL='https://api.binance.com/api/v3/ticker/price?symbol=EGLDUSDT';
    const AmountStakedURL='https://new-api.trust.market/getOwnersByCollection/EAPES-8f3c1f';
    const TotalVolumeURL = 'https://new-api.trust.market/getCollectionProfile/EAPES-8f3c1f';

    async function GetFloorPrice(){
      //FP using fetch method
      const responce = await fetch(floorPriceURL);
      const data = await responce.json();
      document.getElementById("FloorPrice").innerHTML = ("Floor price: "+data+" EGLD");

      //FP in USDC using fetch method
      const responce1 = await fetch(USDCfloorPriceURL);
      const data1 = await responce1.json();
      const PlaceHolder = data1.price*data;
      const OneDecimal = PlaceHolder.toFixed(1);
      document.getElementById("FloorPriceInUSDC").innerHTML = ("Floor price in USDC: $"+OneDecimal);

      //averageSalePrice
      const responce5 = await fetch(TotalVolumeURL);
      const data5 = await responce5.json();
      const AveSalePriceInEGLD = data5.averageEgldPrice;
      const AveSalePriceInEGLD1 = AveSalePriceInEGLD.toFixed(1);
      document.getElementById("AveSalePrice").innerHTML = ("Ave Sale Price: "+AveSalePriceInEGLD1+" EGLD");


      //Amount staked PLEASE FIGURE OUT
      const responce2 = await fetch(AmountStakedURL);
      const data2 = await responce2.json();
      const newData=data2[0].nftsCount;
      document.getElementById("AmountStaked").innerHTML = ("Amount Staked: "+newData+" THIS IS INCORRECT");
    


      //Total Volumne
      const responce3 = await fetch(TotalVolumeURL);
      const data3 = await responce3.json();
      const TotVol = data3.totalEgldVolume;
      const TotVol1 = TotVol.toFixed(1);
      document.getElementById("TotalVolume").innerHTML = ("Total Volume: "+TotVol1+" EGLD");

      //24 hour vol
      const responce4 = await fetch(TotalVolumeURL);
      const data4 = await responce4.json();
      const TwoFourVol = data4.dayEgldVolume;
      const TwoFourVol1 = TwoFourVol.toFixed(1);
      document.getElementById("24HourVol").innerHTML = ("Total Volume(24h): "+TwoFourVol1+" EGLD");
    }
    
   

    //calling the functions
    GetFloorPrice();

  </script>




<!--<h1 class="heading">Data Center</h1>-->


</body>
</html>
